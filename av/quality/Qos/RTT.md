## RTT

### RTT 计算

#### 方案

- RTCP-XR





#### RTCP-XR

网关首先会发送一个RTCP-XR的RRTR协议，这个协议里面会包含了网关当前的NTP时间。WebRTC客户端收RRTR之后，它会有一些回包策略，比如基于上行带宽、拥塞情况和定时器的因素，它会在一段时间之内给RRTR回包DLRR。回的这个数据包里面包含了两时间，一个是原封不动的RRTR里NTP时间为LRR，第二个时间就是客户端从收到这个RRTR到发送DLRR的时间间隔。

网关收到DLRR以后的处理就很简单了，首先是把本地的时间减去LRR，就是我原来发送的数据包的时间，再减去你发送的这个时间间隔，RTT就计算出来了。

