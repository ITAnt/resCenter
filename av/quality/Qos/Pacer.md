## Pacer

网络报文平滑策略。

视频帧可能分别封装在多个RTP报文，若这个视频帧RTP报文同时发送到网络，必然会导致网络瞬间拥塞。PACER 就是实现把RTP同一时刻产生的若干包，周期性的发送，防止上行流量激增导致拥塞。
让视频数据按照评估码率均匀的分布在各个时间片里发送。

削峰填谷； 将报文平滑地发送给接收端。在弱网环境尤其重要。  





Webrtc 中 pacer 的流程比较清晰，分为三步：

1. 如果一帧图像被编码和RTP切分打包后，先会将RTP报文存在待发送的队列中，并将报文元数据(packet id, size, timestamp, 重传标示)送到pacer queue进行排队等待发送，插入队列的元数据会进行优先级排序。
2. pacer timer会触发一个定时任务事件来计算budget，budget会算出当前时间片网络可以发送多少数据，然后从pacer queue当中取出报文元数据进行网络发送。
3. 如果pacer queue没有更多待发送的报文，但budget却还可以发送更多的数据，这个时候pacer会进行padding报文补充。

